!function(){function e(){$.bot.loadScriptRecursive("./lang/english",!0),"english"!=t&&$.bot.loadScriptRecursive("./lang/"+t,!0),$.inidb.exists("settings","response_@chat")||$.setIniDbBoolean("settings","response_@chat",!0)}function n(e,n){e&&n&&(a[e]=n)}function s(e){var n,s=a[e.toLowerCase()];if(!s)return $.logError("./core/lang.js",21,'Language string missing for "'+e+'"'),$.consoleLn('[lang.js] Missing string "'+e+'"'),'Could not find string for "'+e+'"';for(n=1;n<arguments.length;n++)for(;s.indexOf("$"+n)>=0;)s=s.replace("$"+n,arguments[n]);return s}function i(e){return a[e]}var a=[],t=$.inidb.exists("settings","lang")?$.inidb.get("settings","lang"):"english";$.bind("command",function(n){var i,a=n.getSender().toLowerCase(),r=n.getCommand(),g=n.getArgs(),o=g[0];if(r.equalsIgnoreCase("lang")){if(!$.isAdmin(a))return void $.say($.whisperPrefix(a)+$.adminMsg);o?(o=o.toLowerCase(),$.fileExists("./scripts/lang/"+o+"/main.js")?($.inidb.set("settings","lang",o),t=o,e(),$.say($.whisperPrefix(a)+s("lang.lang.changed",o))):$.say($.whisperPrefix(a)+s("lang.lang.404"))):$.say($.whisperPrefix(a)+s("lang.curlang",t))}r.equalsIgnoreCase("mute")&&(i=!$.getIniDbBoolean("settings","response_@chat"),$.setIniDbBoolean("settings","response_@chat",i),$.say($.whisperPrefix(a)+s(i?"lang.response.enabled":"lang.response.disabled"))),r.equalsIgnoreCase("toggleme")&&(i=!$.getIniDbBoolean("settings","response_action"),$.setIniDbBoolean("settings","response_action",i),$.say($.whisperPrefix(a)+s(i?"lang.response.action.enabled":"lang.response.action.disabled")))}),$.bind("initReady",function(){$.bot.isModuleEnabled("./core/lang.js")&&($.registerChatCommand("./core/lang.js","lang",1),$.registerChatCommand("./core/lang.js","mute",1),$.registerChatCommand("./core/lang.js","toggleme",1))}),$.lang={exists:i,get:s,register:n},e()}();
