!function(){function e(e,t){try{var a=e.getMessage();return a=r(a,t),l=o.link.exec(a)[0],$.log("patternDetector","Matched link on message from "+e.getSender()+": "+l),!0}catch(n){return!1}}function t(){return l}function r(e,t){return e+="",e.replace(/"/g,"").replace(/--/g,".").replace(/\[dot]/g,".").replace(/<dot>/g,".").replace(/\{dot}/g,".").replace(/\(dot\)/g,"."),t&&e.replace(/\sdot\s/g,".").replace(/,/g,".").replace(/\|-\|/g,"h").replace(/\|_\|/g,"u").replace(/\\\//g,"v").replace(/0/g,"o").replace(/1/g,"i").replace(/3/g,"e").replace(/5/g,"s").replace(/7/g,"t").replace(/8/g,"b").replace(/\|\)/g,"d").replace(/\|\)/g,"d").replace(/\(\)/g,"o").replace(/\(/g,"c").replace(/\$/g,"s").replace(/\/-\\/g,"a").replace(/\|\\\/\|/g,"m").replace(/\|\/\|/g,"n").replace(/\|\\\|/g,"n").replace(/\s\./g,".").replace(/\.\s/g,".").replace(/\.\./g,"."),e}function a(e){try{var t=e.getMessage()+"",r=t.match(o.repeatedSeq);return r.sort(function(e,t){return e.length<t.length?1:-1}),r.slice(0,1)[0].length}catch(a){return 0}}function n(e){try{var t=e.getMessage()+"",r=t.match(o.nonAlphaSeq);return r.sort(function(e,t){return e.length<t.length?1:-1}),r.slice(0,1)[0].length}catch(a){return 0}}function g(e){var t=e.getMessage()+"",r=t.match(o.nonAlphaCount);try{return r.sort(function(e,t){return e.length<t.length?1:-1}),r.length}catch(a){return 0}}function c(e){return $.emotesHandler.getEmotesMatchCount(e.getMessage()+"")}var o={link:new RegExp("((?:(http|https|Http|Https|rtsp|Rtsp):\\/\\/(?:(?:[a-z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,64}(?:\\:(?:[a-z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,25})?\\@)?)?((?:(?:[a-z0-9][a-z0-9\\-]{0,64}\\.)+(?:(?:aero|arpa|asia|a[cdefgilmnoqrstuwxz])|(?:biz|b[abdefghijmnorstvwyz])|(?:cat|com|coop|c[acdfghiklmnoruvxyz])|d[ejkmoz]|(?:edu|e[cegrstu])|f[ijkmor]|(?:gov|g[abdefghilmnpqrstuwy])|h[kmnrtu]|(?:info|int|i[delmnoqrst])|(?:jobs|j[emop])|k[eghimnrwyz]|l[abcikrstuvy]|(?:mil|mobi|museum|m[acdghklmnopqrstuvwxyz])|(?:name|net|n[acefgilopruz])|(?:org|om)|(?:pro|p[aefghklmnrstwy])|qa|r[eouw]|s[abcdeghijklmnortuvyz]|(?:tel|travel|t[cdfghjklmnoprtvwz])|u[agkmsyz]|v[aceginu]|m[e]|w[fs]|y[etu]|z[amw]))|(?:(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9])))(?:\\:\\d{1,5})?)(\\/(?:(?:[a-z0-9\\;\\/\\?\\:\\@\\&\\=\\#\\~\\-\\.\\+\\!\\*\\'\\(\\)\\,\\_])|(?:\\%[a-fA-F0-9]{2}))*)?(?:\\b|$)|(magnet:|mailto:|ed2k://|irc://|ircs://|skype:|ymsgr:|xfire:|steam:|aim:|spotify:)","i"),repeatedSeq:/(.)(\1+)/g,nonAlphaSeq:/([^a-z0-9 ])(\1+)/gi,nonAlphaCount:/([^a-z0-9 ])/gi},l="";$.patternDetector={hasLinks:e,getLongestRepeatedSequence:a,getLongestNonLetterSequence:n,getNumberOfNonLetters:g,getLastFoundLink:t,getNumberOfEmotes:c}}();
