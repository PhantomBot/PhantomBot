(function(){if(!$.inidb.exists("updates","installedv2")||$.inidb.get("updates","installedv2")!="true"){var s=$.inidb.GetFileList(),e,n,t,i,o=["./games/8ball.js","./games/adventureSystem.js","./games/killCommand.js","./commands/topCommand.js","./games/random.js","./games/roll.js","./games/roulette.js","./games/slotMachine.js","./handlers/followHandler.js","./handlers/hostHandler.js","./handlers/subscribeHandler.js","./handlers/donationHandler.js","./systems/cleanupSystem.js","./systems/greetingSystem.js","./systems/noticeSystem.js","./systems/pollSystem.js","./systems/quoteSystem.js","./systems/raffleSystem.js","./systems/raidSystem.js","./systems/youtubePlayer.js"];if($.inidb.FileExists("settings")){$.consoleLn("Starting PhantomBot version 2.0 updates...");$.consoleLn("Backing up commands...");e=a("command");$.consoleLn("Backing up times...");n=a("time");$.consoleLn("Backing up points...");t=a("points");$.consoleLn("Backup completed.");$.consoleLn("Deleting old files...");for(i in s){$.inidb.RemoveFile(s[i])}$.consoleLn("Restoring commands...");l("command",e);$.consoleLn("Restoring times...");l("time",n);$.consoleLn("Restoring points...");l("points",t)}$.consoleLn("Disabling default modules...");for(i in o){$.inidb.set("modules",o[i],"false")}$.consoleLn("Done!");$.inidb.set("updates","installedv2","true")}function a(s){var e=[],n=$.inidb.GetKeyList(s,""),t,i;for(i in n){switch(s){case"time":t=parseInt($.inidb.get(s,n[i]));if(t>=600){e[n[i]]=$.inidb.get(s,n[i])}break;case"points":t=parseInt($.inidb.get(s,n[i]));if(t>=10){e[n[i]]=$.inidb.get(s,n[i])}break;default:e[n[i]]=$.inidb.get(s,n[i]);break}}return e}function l(s,e){var n;for(n in e){$.inidb.set(s,n,e[n])}}})();
