!function(){function e(e){var s,t,n=[],i=$.inidb.GetKeyList(e,"");for(t in i)switch(e){case"time":s=parseInt($.inidb.get(e,i[t])),s>=600&&(n[i[t]]=$.inidb.get(e,i[t]));break;case"points":s=parseInt($.inidb.get(e,i[t])),s>=10&&(n[i[t]]=$.inidb.get(e,i[t]));break;default:n[i[t]]=$.inidb.get(e,i[t])}return n}function s(e,s){var t;for(t in s)$.inidb.set(e,t,s[t])}if(!$.inidb.exists("updates","installedv2")||"true"!=$.inidb.get("updates","installedv2")){var t,n,i,o,a=$.inidb.GetFileList(),d=["./games/8ball.js","./games/adventureSystem.js","./games/killCommand.js","./commands/topCommand.js","./games/random.js","./games/roll.js","./games/roulette.js","./games/slotMachine.js","./handlers/followHandler.js","./handlers/hostHandler.js","./handlers/subscribeHandler.js","./handlers/donationHandler.js","./systems/cleanupSystem.js","./systems/greetingSystem.js","./systems/pointSystem.js","./systems/noticeSystem.js","./systems/pollSystem.js","./systems/quoteSystem.js","./systems/raffleSystem.js","./systems/ticketraffleSystem.js","./systems/raidSystem.js","./systems/youtubePlayer.js"];if($.inidb.FileExists("settings")){$.consoleLn("Starting PhantomBot version 2.0 updates..."),$.consoleLn("Backing up commands..."),t=e("command"),$.consoleLn("Backing up times..."),n=e("time"),$.consoleLn("Backing up points..."),i=e("points"),$.consoleLn("Backup completed."),$.consoleLn("Deleting old files...");for(o in a)$.inidb.RemoveFile(a[o]);$.consoleLn("Restoring commands..."),s("command",t),$.consoleLn("Restoring times..."),s("time",n),$.consoleLn("Restoring points..."),s("points",i)}$.consoleLn("Disabling default modules...");for(o in d)$.inidb.set("modules",d[o],"false");$.consoleLn("PhantomBot v2.0 updates completed!"),$.inidb.set("updates","installedv2","true")}if(!$.inidb.exists("updates","installedv2.0.5")||"true"!=$.inidb.get("updates","installedv2.0.5")){var l=["./systems/betSystem.js","./handlers/wordCounter.js","./systems/ranksSystem.js","./systems/auctionSystem.js","./commands/highlightCommand.js"];$.consoleLn("Starting PhantomBot version 2.0.5 updates..."),$.consoleLn("Disabling new default modules...");for(o in l)$.inidb.set("modules",l[o],"false");$.consoleLn("Removing commandCooldown table..."),$.inidb.RemoveFile("commandCooldown"),$.consoleLn("PhantomBot v2.0.5 updates completed!"),$.inidb.set("updates","installedv2.0.5","true")}if($.inidb.exists("updates","installedv2.0.6")&&"true"==$.inidb.get("updates","installedv2.0.6")||($.consoleLn("Starting PhantomBot version 2.0.6 updates..."),$.inidb.exists("chatModerator","capsLimit")&&$.inidb.del("chatModerator","capsLimit"),$.consoleLn("PhantomBot v2.0.6 updates completed!"),$.inidb.set("updates","installedv2.0.6","true")),!$.inidb.exists("updates","installedv2.0.7")||"true"!=$.inidb.get("updates","installedv2.0.7")){$.consoleLn("Starting PhantomBot version 2.0.7 updates...");var l=["./handlers/gameWispHandler.js"];$.consoleLn("Disabling new default modules...");for(o in l)$.inidb.set("modules",l[o],"false");$.inidb.exists("chatModerator","regularsToggle")&&($.inidb.get("chatModerator","regularsToggle").equalsIgnoreCase("true")?($.inidb.set("chatModerator","regularsModerateLinks",!1),$.inidb.del("chatModerator","regularsToggle")):$.inidb.get("chatModerator","regularsToggle").equalsIgnoreCase("false")&&($.inidb.set("chatModerator","regularsModerateLinks",!0),$.inidb.del("chatModerator","regularsToggle"))),$.inidb.exists("chatModerator","subscribersToggle")&&($.inidb.get("chatModerator","subscribersToggle").equalsIgnoreCase("true")?($.inidb.set("chatModerator","subscribersModerateLinks",!1),$.inidb.del("chatModerator","subscribersToggle")):$.inidb.get("chatModerator","subscribersToggle").equalsIgnoreCase("false")&&($.inidb.set("chatModerator","subscribersModerateLinks",!0),$.inidb.del("chatModerator","subscribersToggle"))),$.consoleLn("PhantomBot v2.0.7 updates completed!"),$.inidb.set("updates","installedv2.0.7","true")}}();
