!function(){function e(e){var n=e?new Date(e):new Date,o=function(e){return 10>e?"0"+e:e};return o(n.getDate())+"-"+o(n.getMonth()+1)+"-"+n.getFullYear()}function n(e){return e?new Date(e).toLocaleTimeString("en-GB").replace(" ","_"):(new Date).toTimeString()}function o(o,s,t){!$.bot.isModuleEnabled("./core/fileSystem.js")||!i||t&&t.equalsIgnoreCase($.botName)||s.equalsIgnoreCase(".mods")||($.isDirectory("./logs/"+o)||$.mkDir("./logs/"+o),$.writeToFile(n()+" > "+s,"./logs/"+o+"/"+e()+".txt",!0))}function s(n,o,s){if($.bot.isModuleEnabled("./core/fileSystem.js")&&i){$.isDirectory("./logs/event")||$.mkDir("./logs/event"),$.fileExists("./logs/event/"+e()+".txt")||$.touchFile("./logs/event/"+e()+".txt");var t=new Date;$.writeToFile(t.toDateString()+" "+t.toTimeString()+"["+n+"#"+o+"] "+s,"./logs/event/"+e()+".txt",!0)}}function t(n,o,s){if($.bot.isModuleEnabled("./core/fileSystem.js")){$.isDirectory("./logs/error")||$.mkDir("./logs/error");var t=new Date;$.writeToFile(t.toDateString()+" "+t.toTimeString()+"["+n+"#"+o+"] "+s,"./logs/error/"+e()+".txt",!0)}}var i=$.getIniDbBoolean("settings","loggingEnabled",!1);$.bind("ircChannelMessage",function(e){$.log("chat",""+e.getSender()+": "+e.getMessage())}),$.bind("ircPrivateMessage",function(e){var n=e.getSender().toLowerCase(),o=e.getMessage();if(-1==o.toLowerCase().indexOf("moderators if this room")&&$.logEvent("privMsg",$.username.resolve(n)+": "+o,n),$.consoleDebug($.lang.get("console.received.irsprivmsg",n,o)),o=o.toLowerCase(),n.equalsIgnoreCase("jtv")&&(o.equalsIgnoreCase("clearchat")?$.logEvent("misc.js",126,$.lang.get("console.received.clearchat")):-1!=o.indexOf("clearchat")&&$.logEvent("misc.js",128,$.lang.get("console.received.purgetimeoutban",o.substring(10))),-1!=o.indexOf("now in slow mode")&&$.logEvent("misc.js",132,$.lang.get("console.received.slowmode.start",o.substring(o.indexOf("every")+6))),-1!=o.indexOf("no longer in slow mode")&&$.logEvent("misc.js",136,$.lang.get("console.received.slowmode.end")),-1!=o.indexOf("now in subscribers-only")&&$.logEvent("misc.js",140,$.lang.get("console.received.subscriberonly.start")),-1!=o.indexOf("no longer in subscribers-only")&&$.logEvent("misc.js",144,$.lang.get("console.received.subscriberonly.end")),-1!=o.indexOf("now in r9k")&&$.logEvent("misc.js",148,$.lang.get("console.received.r9k.start")),-1!=o.indexOf("no longer in r9k")&&$.logEvent("misc.js",152,$.lang.get("console.received.r9k.end")),-1!=o.indexOf("hosting"))){var s=o.substring(11,o.indexOf(".",12)).trim();s.equalsIgnoreCase("-")?($.bot.channelIsHosting=null,$.logEvent("misc.js",160,$.lang.get("console.received.host.end"))):($.bot.channelIsHosting=s,$.logEvent("misc.js",163,$.lang.get("console.received.host.start",s)))}}),$.bind("command",function(e){var n=e.getCommand(),o=e.getSender().toLowerCase(),s=$.username.resolve(o),t=e.getArgs(),g=t[0];if(n.equalsIgnoreCase("log")){if(!$.isAdmin(o))return void $.say($.whisperPrefix(o)+$.adminMsg);if(!g)return void(i?$.say($.whisperPrefix(o)+$.lang.get("logging.enabled")):$.say($.whisperPrefix(o)+$.lang.get("logging.disabled")));g.equalsIgnoreCase("enable")&&(i=!0,$.setIniDbBoolean("settings","loggingEnabled",i),$.logEvent("misc.js",203,s+" enabled logging"),$.say($.whisperPrefix(o)+$.lang.get("logging.enabled"))),g.equalsIgnoreCase("disable")&&(i=!1,$.setIniDbBoolean("settings","loggingEnabled",i),$.logEvent("misc.js",213,s+" disabled logging"),$.say($.whisperPrefix(o)+$.lang.get("logging.disabled")))}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./core/logging.js")&&($.consoleDebug($.lang.get("console.loggingstatus",i?$.lang.get("common.enabled"):$.lang.get("common.disabled"))),$.registerChatCommand("./core/logging.js","log",1))}),$.logging={getLogDateString:e,getLogTimeString:n},$.log=o,$.logEvent=s,$.logError=t}();
