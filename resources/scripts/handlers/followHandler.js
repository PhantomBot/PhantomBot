(function(){var e=0,l=0,o=false,n=$.inidb.exists("settings","followReward")?parseInt($.inidb.get("settings","followReward")):100;function a(){if(n>0){if($.systemTime()-e<36e5){l+=1;if(l==3){$.say($.lang.get("followhandler.followtrain.triple"))}else if(l==4){$.say($.lang.get("followhandler.followtrain.quad"))}else if(l==5){$.say($.lang.get("followhandler.followtrain.penta"))}else if(l>5&&l<=10){$.say($.lang.get("followhandler.followtrain.mega",l))}else if(l>10&&l<=20){$.say($.lang.get("followhandler.followtrain.ultra",l))}else if(l>20){$.say($.lang.get("followhandler.followtrain.unbelievable",l))}}else{l=1}}e=$.systemTime()}$.bind("twitchFollowsInitialized",function(){if(!$.bot.isModuleEnabled("./handlers/followHandler.js")){return}$.consoleLn($.lang.get("followhandler.anouncements.enabled"));o=true});$.bind("twitchFollow",function(e){if(!$.bot.isModuleEnabled("./handlers/followHandler.js")){return}var l=e.getFollower().toLowerCase();if($.inidb.GetKeyList("followed","").length==0){o=false;var s=setTimeout(function(){o=true;clearTimeout(s)},3e5)}if($.inidb.exists("followed",l)){return}if($.bot.isModuleEnabled("./commands/lastseenCommand.js")){$.inidb.set("lastseen",l,$.systemTime())}if(n>0){$.inidb.incr("points",l,n)}if(o){if(n>0){$.say($.lang.get("followhandler.new.follow",$.username.resolve(l),$.getPointsString(n)))}else{$.say($.lang.get("followhandler.new.follow.noreward",$.username.resolve(l)))}}$.setIniDbBoolean("followed",l,true);$.writeToFile($.username.resolve(l),"./addons/followHandler/latestFollower.txt",false);a()});$.bind("twitchUnfollow",function(e){if(!$.bot.isModuleEnabled("./handlers/followHandler.js")){return}var l=e.getFollows().toLowerCase(),o=$.getIniDbBoolean("followed",l);if(o){$.setIniDbBoolean("followed",l,false)}});$.bind("command",function(e){var l=e.getSender().toLowerCase(),o=e.getCommand(),a=e.getArgs(),s=a[0];if(o.equalsIgnoreCase("followreward")){s=parseInt(s);if(!s||isNaN(s)){$.say($.whisperPrefix(l)+$.lang.get("followhandler.set.followreward.usage",$.pointNameMultiple))}n=s;$.inidb.set("settings","followReward",n);$.say($.whisperPrefix(l)+$.lang.get("followhandler.set.followreward.success",$.getPointsString(n)))}if(o.equalsIgnoreCase("followers")){$.say($.lang.get("followhandler.followers",$.getFollows($.channelName)))}if(o.equalsIgnoreCase("checkfollow")){s=s.toLowerCase();if(!s||s==""){$.say($.whisperPrefix(l)+$.lang.get("followhandler.check.usage"));return}if($.user.isFollower(s)){$.say($.lang.get("followhandler.check.follows",$.username.resolve(s)))}else{$.say($.lang.get("followhandler.check.notfollows",$.username.resolve(s)))}}});$.bind("initReady",function(){if($.bot.isModuleEnabled("./handlers/followHandler.js")){$.registerChatCommand("./handlers/followHandler.js","followreward",1);$.registerChatCommand("./handlers/followHandler.js","checkfollow",2);$.registerChatCommand("./handlers/followHandler.js","followers",7)}})})();