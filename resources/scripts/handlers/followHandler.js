!function(){function e(){$.systemTime()-l>3e5?3==o?$.say($.lang.get("followhandler.followtrain.triple")):4==o?$.say($.lang.get("followhandler.followtrain.quad")):5==o?$.say($.lang.get("followhandler.followtrain.penta")):20==o?$.say($.lang.get("followhandler.followtrain.mega",o)):30==o?$.say($.lang.get("followhandler.followtrain.ultra",o)):50==o?$.say($.lang.get("followhandler.followtrain.unbelievable",o)):++o:o=1,l=$.systemTime()}var l=0,o=0,s=!1,a=$.inidb.exists("settings","followReward")?parseInt($.inidb.get("settings","followReward")):100,n=$.inidb.exists("settings","followMessage")?$.inidb.get("settings","followMessage"):$.lang.get("followhandler.follow.message");$.bind("twitchFollowsInitialized",function(){$.bot.isModuleEnabled("./handlers/followHandler.js")&&($.consoleLn($.lang.get("followhandler.anouncements.enabled")),s=!0)}),$.bind("twitchFollow",function(l){if($.bot.isModuleEnabled("./handlers/followHandler.js")){var o=l.getFollower().toLowerCase();$.inidb.exists("followed",o)||($.bot.isModuleEnabled("./commands/lastseenCommand.js")&&$.inidb.set("lastseen",o,$.systemTime()),a>0&&$.inidb.incr("points",o,a),s&&(followmsg=n.replace("(name)",$.username.resolve(o)),a>0?(followmsg=followmsg.replace("(reward)",$.getPointsString(a)),$.say(followmsg)):$.say(followmsg.replace("(name)",$.username.resolve(o)))),$.setIniDbBoolean("followed",o,!0),$.writeToFile($.username.resolve(o),"./addons/followHandler/latestFollower.txt",!1),e())}}),$.bind("twitchUnfollow",function(e){if($.bot.isModuleEnabled("./handlers/followHandler.js")){var l=e.getFollows().toLowerCase(),o=$.getIniDbBoolean("followed",l);o&&$.setIniDbBoolean("followed",l,!1)}}),$.bind("command",function(e){var l=e.getSender().toLowerCase(),o=e.getCommand(),s=e.getArgs(),r=e.getArguments(),t=s[0];if(o.equalsIgnoreCase("followreward")&&(t=parseInt(t),(!t||isNaN(t))&&$.say($.whisperPrefix(l)+$.lang.get("followhandler.set.followreward.usage",$.pointNameMultiple)),a=t,$.inidb.set("settings","followReward",a),$.say($.whisperPrefix(l)+$.lang.get("followhandler.set.followreward.success",$.getPointsString(a)))),o.equalsIgnoreCase("followmessage")){if(!t)return void $.say($.whisperPrefix(l)+$.lang.get("followhandler.set.followmessage.usage"));n=r,$.inidb.set("settings","followMessage",n),$.say($.whisperPrefix(l)+$.lang.get("followhandler.set.followmessage.success"))}if(o.equalsIgnoreCase("followers")&&$.say($.lang.get("followhandler.followers",$.getFollows($.channelName))),o.equalsIgnoreCase("checkfollow")){if(t=t.toLowerCase(),!t||""==t)return void $.say($.whisperPrefix(l)+$.lang.get("followhandler.check.usage"));$.user.isFollower(t)?$.say($.lang.get("followhandler.check.follows",$.username.resolve(t))):$.say($.lang.get("followhandler.check.notfollows",$.username.resolve(t)))}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./handlers/followHandler.js")&&($.registerChatCommand("./handlers/followHandler.js","followreward",1),$.registerChatCommand("./handlers/followHandler.js","followmessage",1),$.registerChatCommand("./handlers/followHandler.js","checkfollow",2),$.registerChatCommand("./handlers/followHandler.js","followers",7))})}();
