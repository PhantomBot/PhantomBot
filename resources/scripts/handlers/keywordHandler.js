!function(){$.bind("ircChannelMessage",function(e){var r,n,a,d,i=e.getMessage().toLowerCase(),o=e.getSender(),s=$.username.resolve(o),t=$.inidb.GetKeyList("keywords","");if($.bot.isModuleEnabled("./handlers/keywordHandler.js")){for(d in t)i.contains(t[d])&&(a=t[d]);if(r=new RegExp("\\b"+a+"\\b","i"),!r.test(i))return;if(n=$.inidb.get("keywords",a),n=n.replace("(sender)",s).replace("(@sender)","@"+s).replace("(baresender)",o).replace("(pointsname)",$.pointNameMultiple).replace("(uptime)",$.getStreamUptime($.channelName)).replace("(game)",$.getGame($.channelName)).replace("(status)",$.getStatus($.channelName)),!$.isAdmin(o)&&$.coolDown.get(a,o)>0)return void $.consoleDebug("keyword "+a+" not sent because its on a cooldown.");$.say(n)}}),$.bind("command",function(e){var r=e.getSender(),n=e.getCommand(),a=(e.getArguments().trim(),e.getArgs()),d=a[0],i=a[1];if(n.equalsIgnoreCase("keyword")){if(!$.isAdmin(r))return void $.say($.whisperPrefix(r)+$.adminMsg);if(!d)return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.usage"));if(d.equalsIgnoreCase("add")){if(!i)return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.add.usage"));var o=a.splice(2).join(" ");return i=a[1].toLowerCase(),$.inidb.set("keywords",i,o),$.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.added",i)),void $.logEvent("keywordHandler.js",100,r+' added keyword "'+i+'" with the message "'+o+'"')}if(d.equalsIgnoreCase("remove")){if(!i)return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.remove.usage"));if(!$.inidb.exists("keywords",i))return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.404"));i=a[1].toLowerCase(),$.inidb.del("keywords",i),$.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.removed",i)),$.logEvent("keywordHandler.js",100,r+' removed the keyword "'+i+'"')}}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./handlers/keywordHandler.js")&&$.registerChatCommand("./handlers/keywordHandler.js","keyword",1)})}();
