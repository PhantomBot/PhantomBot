!function(){$.bind("ircChannelMessage",function(e){for(var r=e.getMessage().toLowerCase(),n=e.getSender(),a="",d="",i="",s=$.inidb.GetKeyList("keywords",""),o=0;o<s.length;o++)if(i=s[o].toLowerCase(),a=new RegExp("\\b"+i+"\\b","i"),a.exec(r))return d=$.inidb.get("keywords",i),d=d.replace("(sender)",$.username.resolve(e.getSender())),d=d.replace("(@sender)","@"+$.username.resolve(e.getSender())),d=d.replace("(baresender)",e.getSender()),d=d.replace("(pointsname)",$.pointNameMultiple),d=d.replace("(uptime)",$.getStreamUptime($.channelName)),d=d.replace("(game)",$.getGame($.channelName)),d=d.replace("(status)",$.getStatus($.channelName)),$.coolDown.get(i,n)>0?void $.consoleDebug("keyword "+i+" not sent because its on a cooldown."):void $.say(d)}),$.bind("command",function(e){var r=e.getSender(),n=e.getCommand(),a=(e.getArguments().trim(),e.getArgs()),d=a[0],i=a[1].toLowerCase();if(n.equalsIgnoreCase("keyword")){if(!$.isAdmin(r))return void $.say($.whisperPrefix(r)+$.adminMsg);if(!d)return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.usage"));if(d.equalsIgnoreCase("add")){if(!i)return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.add.usage"));var s=a.splice(2).join(" ");return $.inidb.set("keywords",i+"",s),void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.added",i))}if(d.equalsIgnoreCase("remove")){if(!i)return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.remove.usage"));if(!$.inidb.exists("keywords",i))return void $.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.404"));$.inidb.del("keywords",i),$.say($.whisperPrefix(r)+$.lang.get("keywordhandler.keyword.removed",i))}}}),$.bind("initReady",function(){$.bot.isModuleEnabled("./handlers/keywordHandler.js")&&$.registerChatCommand("./handlers/keywordHandler.js","keyword",1)})}();
